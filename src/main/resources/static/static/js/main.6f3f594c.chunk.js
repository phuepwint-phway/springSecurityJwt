(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(49),s=t.n(l),c=(t(61),t(5)),o=t(10),m=t(3),i=(t(63),t(65),t(162)),u="http://localhost:8080/api/auth/",d={register:function(e,a,t){return i.a.post(u+"signup",{username:e,email:a,password:t})},login:function(e,a){return i.a.post(u+"login",{username:e,password:a}).then(function(e){return e.data.token&&localStorage.setItem("user",JSON.stringify(e.data)),e.data})},logout:function(){localStorage.removeItem("user")},getCurrentUser:function(){return JSON.parse(localStorage.getItem("user"))}},g=t(26),E=t.n(g),v=t(14),f=t.n(v),p=t(27),b=t.n(p),h=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},N=function(){var e=Object(m.m)(),a=Object(n.useRef)(),t=Object(n.useRef)(),l=Object(n.useState)(""),s=Object(c.a)(l,2),o=s[0],i=s[1],u=Object(n.useState)(""),g=Object(c.a)(u,2),v=g[0],p=g[1],N=Object(n.useState)(!1),O=Object(c.a)(N,2),j=O[0],S=O[1],k=Object(n.useState)(""),w=Object(c.a)(k,2),C=w[0],y=w[1];return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card card-container"},r.a.createElement("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),r.a.createElement(E.a,{onSubmit:function(n){n.preventDefault(),y(""),S(!0),a.current.validateAll(),0===t.current.context._errors.length?d.login(o,v).then(function(a){console.log("response: "),console.log(a),e("/profile"),window.location.reload()},function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();S(!1),y(a)}):S(!1)},ref:a},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(f.a,{type:"text",className:"form-control",name:"username",value:o,onChange:function(e){var a=e.target.value;i(a)},validations:[h]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(f.a,{type:"password",className:"form-control",name:"password",value:v,onChange:function(e){var a=e.target.value;p(a)},validations:[h]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",disabled:j},j&&r.a.createElement("span",{className:"spinner-border spinner-border-sm"}),r.a.createElement("span",null,"Login"))),C&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},C)),r.a.createElement(b.a,{style:{display:"none"},ref:t}))))},O=t(50),j=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},S=function(e){if(!Object(O.isEmail)(e))return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This is not a valid email.")},k=function(e){if(e.length<3||e.length>20)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The username must be between 3 and 20 characters.")},w=function(e){if(e.length<6||e.length>40)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The password must be between 6 and 40 characters.")},C=function(){var e=Object(n.useRef)(),a=Object(n.useRef)(),t=Object(n.useState)(""),l=Object(c.a)(t,2),s=l[0],o=l[1],m=Object(n.useState)(""),i=Object(c.a)(m,2),u=i[0],g=i[1],v=Object(n.useState)(""),p=Object(c.a)(v,2),h=p[0],N=p[1],O=Object(n.useState)(!1),C=Object(c.a)(O,2),y=C[0],B=C[1],T=Object(n.useState)(""),U=Object(c.a)(T,2),x=U[0],F=U[1];return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card card-container"},r.a.createElement("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),r.a.createElement(E.a,{onSubmit:function(t){t.preventDefault(),F(""),B(!1),e.current.validateAll(),0===a.current.context._errors.length&&d.register(s,u,h).then(function(e){F(e.data.message),B(!0)},function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();F(a),B(!1)})},ref:e},!y&&r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(f.a,{type:"text",className:"form-control",name:"username",value:s,onChange:function(e){var a=e.target.value;o(a)},validations:[j,k]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(f.a,{type:"text",className:"form-control",name:"email",value:u,onChange:function(e){var a=e.target.value;g(a)},validations:[j,S]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(f.a,{type:"password",className:"form-control",name:"password",value:h,onChange:function(e){var a=e.target.value;N(a)},validations:[j,w]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block"},"Sign Up"))),x&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:y?"alert alert-success":"alert alert-danger",role:"alert"},x)),r.a.createElement(b.a,{style:{display:"none"},ref:a}))))};function y(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var B={getPublicContent:function(){return i.a.get("http://localhost:8080/api/main/all")},getUserBoard:function(){return console.log(y()),i.a.get("http://localhost:8080/api/main/user",{headers:y()})},getModeratorBoard:function(){return i.a.get("http://localhost:8080/api/main/manager",{headers:y()})},getAdminBoard:function(){return i.a.get("http://localhost:8080/api/main/admin",{headers:y()})}},T=function(){var e=Object(n.useState)(""),a=Object(c.a)(e,2),t=a[0],l=a[1];return Object(n.useEffect)(function(){B.getPublicContent().then(function(e){console.log(e.data),l(e.data)},function(e){var a=e.response&&e.response.data||e.message||e.toString();l(a)})},[]),r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h3",null,t)))},U=function(){var e=d.getCurrentUser();return console.log(e),r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h3",null,r.a.createElement("strong",null,e.username)," Profile")),r.a.createElement("p",null,r.a.createElement("strong",null,"Token:")," ",e.token.substring(0,20)," ..."," ",e.token.substr(e.token.length-20)),r.a.createElement("p",null,r.a.createElement("strong",null,"Email:")," ",e.email))},x={on:function(e,a){document.addEventListener(e,function(e){return a(e.detail)})},dispatch:function(e,a){document.dispatchEvent(new CustomEvent(e,{detail:a}))},remove:function(e,a){document.removeEventListener(e,a)}},F=function(){var e=Object(n.useState)(""),a=Object(c.a)(e,2),t=a[0],l=a[1];return Object(n.useEffect)(function(){B.getAdminBoard().then(function(e){l(e.data)},function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();l(a),e.response&&401===e.response.status&&x.dispatch("logout")})},[]),r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h3",null,t)))},L=function(){var e=Object(n.useState)(""),a=Object(c.a)(e,2),t=a[0],l=a[1];return Object(n.useEffect)(function(){B.getUserBoard().then(function(e){l(e.data)},function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();l(a),e.response&&401===e.response.status&&x.dispatch("logout")})},[]),r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h3",null,t)))},R=function(){var e=Object(n.useState)(""),a=Object(c.a)(e,2),t=a[0],l=a[1];return Object(n.useEffect)(function(){B.getModeratorBoard().then(function(e){l(e.data)},function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();l(a),e.response&&401===e.response.status&&x.dispatch("logout")})},[]),r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h3",null,t)))},A=function(){var e=Object(n.useState)(!1),a=Object(c.a)(e,2),t=a[0],l=a[1],s=Object(n.useState)(!1),i=Object(c.a)(s,2),u=i[0],g=i[1],E=Object(n.useState)(void 0),v=Object(c.a)(E,2),f=v[0],p=v[1];Object(n.useEffect)(function(){var e=d.getCurrentUser();return e&&(p(e),l(e.roles.includes("ROLE_MODERATOR")),g(e.roles.includes("ROLE_ADMIN"))),x.on("logout",function(){b()}),function(){x.remove("logout")}},[]);var b=function(){d.logout(),l(!1),g(!1),p(void 0)};return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},r.a.createElement(o.b,{to:"/",className:"navbar-brand"},"TOM"),r.a.createElement("div",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/home",className:"nav-link"},"Home")),t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/mod",className:"nav-link"},"Moderator Board")),u&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/admin",className:"nav-link"},"Admin Board")),f&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/user",className:"nav-link"},"User"))),f?r.a.createElement("div",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/profile",className:"nav-link"},f.username)),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/#/login",className:"nav-link",onClick:b},"LogOut"))):r.a.createElement("div",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/login",className:"nav-link"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/register",className:"nav-link"},"Sign Up")))),r.a.createElement("div",{className:"container mt-3"},r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/",element:r.a.createElement(T,null)}),r.a.createElement(m.a,{path:"/home",element:r.a.createElement(T,null)}),r.a.createElement(m.a,{path:"/login",element:r.a.createElement(N,null)}),r.a.createElement(m.a,{path:"/register",element:r.a.createElement(C,null)}),r.a.createElement(m.a,{path:"/profile",element:r.a.createElement(U,null)}),r.a.createElement(m.a,{path:"/user",element:r.a.createElement(L,null)}),r.a.createElement(m.a,{path:"/mod",element:r.a.createElement(R,null)}),r.a.createElement(m.a,{path:"/admin",element:r.a.createElement(F,null)}))))},I=function(e){e&&e instanceof Function&&t.e(1).then(t.bind(null,161)).then(function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,l=a.getLCP,s=a.getTTFB;t(e),n(e),r(e),l(e),s(e)})};s.a.createRoot(document.getElementById("root")).render(r.a.createElement(o.a,null,r.a.createElement(A,null))),I()},52:function(e,a,t){e.exports=t(160)},61:function(e,a,t){},65:function(e,a,t){}},[[52,3,2]]]);
//# sourceMappingURL=main.6f3f594c.chunk.js.map